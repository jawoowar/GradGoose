
-- create

-- Generic Student Discounts
CREATE TABLE StudentDiscount(  
    DiscountID int NOT NULL PRIMARY KEY AUTO_INCREMENT,
    Store VARCHAR(50) NOT NULL,
    Discount Float,
    Criteria VARCHAR(255)
);

CREATE TABLE StudentBeanDiscount (
    DiscountID int NOT NULL PRIMARY KEY AUTO_INCREMENT,
    Store VARCHAR(50) NOT NULL,
    Discount Float,
    Criteria VARCHAR(255)
);

-- store spesific discounts
CREATE TABLE TescoStoreDiscount (
    DiscountID int NOT NULL PRIMARY KEY AUTO_INCREMENT,
    Discount Float,
    Criteria VARCHAR(255)
);

CREATE TABLE LidlStoreDiscount (
    DiscountID int NOT NULL PRIMARY KEY AUTO_INCREMENT,
    Discount Float,
    Criteria VARCHAR(255)
);

-- catagory table
CREATE TABLE Catagories (
    CatagoryID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
    Catagory VARCHAR(100) NOT NULL,
    CatagoryImgURL Text NOT NULL
);

-- store items
CREATE TABLE TescoItems (
    ItemID INT NOT NULL PRIMARY KEY AUTO_INCREMENT PRIMARY KEY,
    ItemName VARCHAR(100) NOT NULL,
    Price Float NOT NULL,
    ImageURL Text,
    Catagory Int,
    Vegan Binary(1),
    Vegatarian Binary(1),
    Ingrediants Text,
    Quantity INT,
    Poundage INT,
    Rating Float,
    numOfRatings INT,
    relevanceScore DOUBLE(6, 6),
    StudentBeanDiscountID INT,
    StudentDiscountID INT,
    StoreDiscountID INT,
    FOREIGN KEY (StudentBeanDiscountID) REFERENCES StudentBeanDiscount(DiscountID),
    FOREIGN KEY (StudentDiscountID) REFERENCES StudentDiscount(DiscountID),
    FOREIGN KEY (StoreDiscountID) REFERENCES TescoStoreDiscount(DiscountID)
);

CREATE TABLE LidlItems (
    ItemID int NOT NULL PRIMARY KEY AUTO_INCREMENT,
    ItemName VARCHAR(100) NOT NULL,
    Price Float NOT NULL,
    ImageURL Text,
    Catagory int,
    Vegan Binary(1),
    Vegatarian Binary(1),
    Ingrediants Text,
    Quantity INT,
    Poundage INT,
    Rating Float,
    numOfRatings INT,
    relevanceScore DOUBLE(6, 6),
    StudentBeanDiscountID INT,
    StudentDiscountID INT,
    StoreDiscountID INT,
    FOREIGN KEY (StudentBeanDiscountID) REFERENCES StudentBeanDiscount(DiscountID),
    FOREIGN KEY (StudentDiscountID) REFERENCES StudentDiscount(DiscountID),
    FOREIGN KEY (StoreDiscountID) REFERENCES LidlStoreDiscount(DiscountID)
);

-- cross store items
CREATE TABLE JointItems (
    ItemID int NOT NULL PRIMARY KEY AUTO_INCREMENT,
    ItemName VARCHAR(100) NOT NULL,
    TescoItemID INT,
    LidlItemID INT,
    FOREIGN KEY (TescoItemID) REFERENCES TescoItems(ItemID),
    FOREIGN KEY (LidlItemID) REFERENCES LidlItems(ItemID)

);

-- sorting information
CREATE TABLE Sort (
    SortID int NOT NULL PRIMARY KEY AUTO_INCREMENT,
    ItemID int NOT NULL,
    PriceScore Float,
    NumRatingScore Float,
    RatingScore Float,
    RelevenceScore Float,
    FOREIGN KEY (ItemID) REFERENCES JointItems(ItemID)
);

-- user tables

--      Lists

Create Table Lists (
    ListID int NOT NULL PRIMARY KEY AUTO_INCREMENT,
    CreationDate DATETIME NOT NULL,
    ChosenStore VARCHAR(50),
    ItemID1 int
    ItemID2 int
    ItemID3 int
    ItemID4 int
    ItemID5 int
    ItemID6 int
    ItemID7 int
    ItemID8 int
    ItemID9 int
    ItemID10 int
);

--      Favorites

Create Table Favorites (
    FavoriteId int NOT NULL Primary key AUTO_INCREMENT,
    ItemID1 int,
    ItemID2 int,
    ItemID3 int,
    ItemID4 int,
    ItemID5 int,
    ItemID6 int,
    ItemID7 int,
    ItemID8 int,
    ItemID9 int,
    ItemID10 int
);

--      User

CREATE TABLE UserID (
    UserID int NOT NULL Primary key AUTO_INCREMENT,
    UserName VARCHAR(50) NOT NULL,
    Email VARCHAR(100) NOT NULL,
    PasswordHash VARCHAR(255) NOT NULL,
    UserImg TEXT,
    TescoClubCardStatue Binary,
    LidlPlusStatus Binary,
    ListIDCurrentTesco int,
    ListIDCurrentLidl int,
    PastList1TescoID int,
    PastList1LidlID int,
    PastList2TescoID int,
    PastList2LidlID int,
    PastList3TescoID int,
    PastList3LidlID int,
    FavoriteTableID int,
    FOREIGN KEY (ListIDCurrentTesco) REFERENCES Lists(ListID),
    FOREIGN KEY (ListIDCurrentLidl) REFERENCES Lists(ListID),
    FOREIGN KEY (PastList1TescoID) REFERENCES Lists(ListID),
    FOREIGN KEY (PastList1LidlID) REFERENCES Lists(ListID),
    FOREIGN KEY (PastList2TescoID) REFERENCES Lists(ListID),
    FOREIGN KEY (PastList2LidlID) REFERENCES Lists(ListID),
    FOREIGN KEY (PastList3TescoID) REFERENCES Lists(ListID),
    FOREIGN KEY (PastList3LidlID) REFERENCES Lists(ListID),
    FOREIGN KEY (FavoriteTableID) REFERENCES Favorites(FavoriteId)
);